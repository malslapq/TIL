## 비선형 자료구조


### 트리 (tree)

- 노트와 링크로 구성(그래프의 일종, Cycle 없음) 
- 계층적 구조를 나타낼 때 사용
  - 폴더 구조(디렉토리, 서브 디렉토리)
  - 조직도, 가계도 등등

#### 특징

- 하나의 노드에서 다른 노드로 이동하는 경로는 1개뿐 (유일)
- 노드가 N개인 트리의 Edge의 수는 N-1개
- Acyclic (Cycle이 존재하지 않는다)
- 모든 노드는 서로 연결되어 있음
- 하나의 Edge를 끊는 경우 2개의 Sub - Tree로 분리됨

<img src="https://gmlwjd9405.github.io/images/data-structure-tree/tree-terms.png" style="width: 90%;" alt="null">

| 트리 관련 용어 | 설명 |
| :---: | :---:|
| `노드(Node)` | 트리 구조의 자료 값을 담고 있는 단위 |
| `간선(Edge)`| 노드 간의 연결선 (link, branch) |
| `루트 노드(Root)` | 부모가 없는 가장 상위 노드 |
| `잎새 노드(Leaf)` | 자식이 없는 노드(단말 노드)|
| `내부 노드(Internal)` | 잎새 노드를 제외한 나머지 노드 |
| `부모 노드(Parent)` | 연결된 두 노드 중 상위 노드 |
| `자식 노드(Child)` | 연결된 두 노드 중 하위 노드 |
| `형제 노드(Sibling)` | 같은 부모를 가지는 노드 |
| `깊이(Depth)` | 루트 노드에서 특정 노드까지 도달하기 위해 거치는 간선의 수 |
| `레벨(Level)` | 트리의 특정 깊이를 가지는 노드 집합 |
| `높이(Height)` | 트리에서 가장 깊숙히 있는 노드의 깊이 |
| `크기(Size)` | 자신을 포함한 자식 노드의 개수 |
| `차수(Degree)` | 각 노드가 지닌 가지의 수 |
| `트리의 차수` | 트리의 최대 차수 |

### 이진트리 (Binary Tree)

- 각 노드는 최대 2개의 자식을 가질 수 있음
- 자식 노드는 좌우를 구분
  - 왼쪽 자식 = 부모의 좌측 아래
  - 오른쪽 자식 = 부모의 우측 아래

#### 이진 트리 특징

- 포와 이진 트리의 높이가 H일 때, 노드의 수는 2의 H+1승 -1개 (H=2, 2의 3승 - 1 = 7)
- 포화, 완전 이진 트리의 노드가 N개 일 때, 높이는 logN (N=4, log4 = 2)
- 이진 트리의 노드가 N개 일 때, 최대 가능 높이는 N

#### 이진트리의 종류

| 종류 | 설명 |
| :---: | :---: | 
| 포화 이진 트리 (Perfect binary tree) | 모든 레벨에서 노드들이 꽉 차있는 트리 |
| 완전 이진 트리 (Complete binary tree) | 마지막 레벨을 제외한 나머지 노드들이 꽉 채워져 있는 트리 |
| 정 이진 트리 (Full binary tree) | 모든 노드가 0 또는 2개의 자식 노드를 가지고 있는 트리 |
| 편향 트리 (Skewed binary tree) | 한쪽으로 기울어져 있는 ~~운동장~~ 트리 |
| 균형 이진 트리 (Balanced binary tree) | 모든 노드의 좌, 우 서브 트리 높이가 1 이상 차이 나지 않는 트리 (탐색 속도 월등히 빠름) |

#### 이진 트리의 순회

- 모든 노드를 빠뜨리거나 중복하지 않고 모두 방문하는 연산
  - 전위 순회, 중위 순회, 후위 순회 (DFS) 
  - 레벨 순회 (BFS)

전위 순회 (Preorder Traversal)

- 현재 노드 -> 왼쪽 노드 -> 오른쪽 노드
<img src="https://mblogthumb-phinf.pstatic.net/20160413_226/shootingstar_romance_1460477282872LdVuj_PNG/2.%C0%FC%C0%A7%BC%F8%C8%B8.PNG?type=w2" style="width: 80%">

중위 순회 (Inorder Traversal)

- 왼쪽 노드 -> 현재 노드 -> 오른쪽 노드
<img src="https://mblogthumb-phinf.pstatic.net/20160413_76/shootingstar_romance_1460477283167R3Dfg_PNG/2.%C1%DF%C0%A7%BC%F8%C8%B8.PNG?type=w2" style="width: 80%">

후위 순회 (Postorder Traversal)

- 왼쪽 노드 -> 오른쪽 노드 -> 현재 노드
<img src="https://mblogthumb-phinf.pstatic.net/20160413_172/shootingstar_romance_1460477283316A2GTK_PNG/3.%C8%C4%C0%A7%BC%F8%C8%B8.PNG?type=w2" style="width: 80%">

레벨 순회 (Levelorder Traversal)

- 왼쪽 레벨 부터 왼쪽 노드 -> 오른쪽 노드
  <img src="http://1.bp.blogspot.com/-nEnbDuRMHg4/Urg6aTyPq9I/AAAAAAAAGdI/u8Yx69PoIO4/s400/Screen+Shot+2013-12-23+at+10.27.44+PM.png" style="width: 80%">

#### 참고

- 1, 2차원 배열과 연결리스트로 구현 가능
- 배열로 구현시 왼쪽 자식 노드는 부모 노드 Index x 2 + 0, 오른쪽 자식 노드는 부모 노드 Index x 2 + 1 (배열의 첫번째 부터 채웠을 경우 +1씩 더 해줘야함)
  - 부모 노드는 자식 노드 Index / 2
    <img src="https://t1.daumcdn.net/cfile/tistory/2234953A563AF25F0D" style="width: 80%">


- 연결리스트로 구현시
<img src="https://t1.daumcdn.net/cfile/tistory/99D0AD345B98A8F219" style="width: 80%">


### 이진 탐색 트리 (Binary Search Tree)

- 왼쪽 자식 노드의 키는 부모 노드의 키보다 작고, 오른쪽 자식 노드의 키는 부모 노드의 키보다 크다.
- 각각의 서브 트리도 이진 탐색 트리를 유지함
- 중복 키를 허용하지 않음

<img src="https://t1.daumcdn.net/cfile/tistory/99A2DE335B889F3004" style="width: 80%">

#### 특징

- 이진 탐색 트리 규칙에 의해 데이터가 정렬된 형태
- 이진 트리에 비해 탐색이 빠름
  - 균형 상태에서 시간복잡도는 O(logN)
  - 불균형 상태에서 시간복잡도는 O(N)

#### 데이터 탐색 방법

- 루트 부터 데이터를 비교하면서 탐색 시작
- 비교연산자를 이용해 노드의 값을 비교하면서 이동한 노드의 데이터 보다 작으면 왼쪽 크면 오른쪽으로 이동
- 만약 찾는 데이터가 없다면 null 반환
- 어떤 데이터를 탐색하더라도 최대 트리 높이 만큼의 탐색이 이루어짐

#### 데이터 삽입 방법

- 루트 부터 비교연산자 이용해 비교하면서 내려가는데, 중복 값이 있다면 추가하지 않고 종료
- Leaf에 도달했다면 Leaf노드와 비교해 작다면 왼쪽 크다면 오른쪽에 데이터 삽입 후 종료

#### 데이터 삭제 방법

- 루트일 경우 트리를 파괴해버린다. 🏴‍☠️
- 루트에서 비교연산자 이용해 탐색 시작
- 삭제 노드가 Leaf일 경우 Leaf의 부모 노드에서 삭제 노드인 Leaf에 해당하는 left 또는 right를 null로 변경
- 삭제 노드에 자식이 하나만 있을 경우
  - 먼저 삭제 노드의 부모 노드로 가서, 삭제 노드의 자식 노드를 연결시켜준다.

<img src="https://www.delftstack.com/img/Data%20Structure/delete2.svg" style="width: 80%">

- 삭제 노드에 자식이 둘 다 있을 경우
  1. 삭제 노드에서 왼쪽 서브트리에 가장 큰 노드를 선택
  2. 삭제 노드에서 오른쪽 서브트리에 가장 작은 노드를 선택
  - 이진 탐색 트리의 특성을 유지하기 위해서 위 둘 중 하나를 선택하고
  - 선택한 노드를 삭제할 노드 위치로 올린다.
  - 위로 올리는 과정 
    - 선택된 노드의 부모 노드와 연결 끊기, 선택된 노드의 자식 노드가 있다면 부모 노드와 연결
    - 삭제 된 노드와 연결돼있던 노드들을 선택된 노드와 연결

<img src="https://mblogthumb-phinf.pstatic.net/20161012_139/mklmkl2001_14762575571986rTN2_PNG/3.PNG?type=w800" style="width: 80%">

### 균형 이진 탐색 트리 (Balanced Binary Search Tree)

- 이진 탐색 트리에 데이터가 추가, 삭제 될 때 해당 트리가 편향 트리가 되지 않도록 균형을 유지하는 트리
- AVL Tree, Red-Black Tree가 있음

#### AVL Tree

- 노드가 삽입, 삭제될 때 트리의 균형 체크, 유지
- 각 노드의 BF(Balance Factor)를 [-1, 0, 1]만 가지게 하여 균형을 유지하는 트리
  - BF = 왼쪽 서브 트리 높이 - 오른쪽 서브 트리 높이
- BF가 양수일 경우 왼쪽 서브트리에 편향, 음수일 경우 오른쪽 서브 트리에 편향
- 회전 연산으로 `단순 회전 = LL, RR`과 `이중 회전 = LR, RL`이 있다. 

#### 회전 연산

- 단순회전 
  - LL (Left - Left) 오른쪽 방향으로 회전 1회
  - RR (Right - Right) 왼쪽 방향으로 회전 1회
     
<img src="https://mblogthumb-phinf.pstatic.net/MjAxNjExMTFfNTkg/MDAxNDc4NzkwNzQ0NzI4.ZtVhyorQj9qDa6hZwfNxJLv0IAKH2NDVa-HuftEreOQg.Zo7x4cWFIDLBdiPv6XTOrmy-M1v7JHaAz7IVtHnmfAYg.PNG.dlwoen9/LL%ED%9A%8C%EC%A0%84.png?type=w2" style="width: 80%">
<img src="https://mblogthumb-phinf.pstatic.net/MjAxNjExMTFfMTAw/MDAxNDc4NzkwODE1MjIz.UGzsF9XRcHkNBW_qKUF-VKgi6Z6hR6G5EfAhfBfkGYwg.pSRAZUOPKQWxZ7yl1macZx7zj9ok5BPNLFmC4XbXz3og.PNG.dlwoen9/RR%ED%9A%8C%EC%A0%84.png?type=w2" style="width: 80%">

- 이중 회전
  - LR (Left - Right) RR 회전 후 LL 회전 2번의 회전
  - RL (Right - Left) LL 회전 후 RR 회전 2번의 회전